{% extends "base.html" %}

{% block title %}–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ - –ú–æ–∏ –ó–∞–º–µ—Ç–∫–∏{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="mb-6">
        <a href="{{ url_for('main.index') }}" class="text-blue-600 hover:text-blue-800 font-semibold mb-2 inline-block">
            ‚Üê –í—Å–µ –∑–∞–º–µ—Ç–∫–∏
        </a>
        <h1 class="text-3xl font-bold text-gray-800">üìÇ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h1>
        <p class="text-gray-600 mt-2">–í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {{ total_categories }}</p>
    </div>

    {% if categories %}
    <!-- –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for category in categories %}
        <a href="{{ url_for('main.category', category_name=category.name) }}" 
           class="bg-white rounded-lg shadow-md hover:shadow-xl transition p-6 group">
            <div class="flex items-center justify-between mb-4">
                <div class="text-4xl">üìÅ</div>
                <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-bold text-lg">
                    {{ category.count }}
                </span>
            </div>
            <h3 class="text-xl font-bold text-gray-800 group-hover:text-blue-600 transition">
                {{ category.name }}
            </h3>
            <p class="text-gray-500 text-sm mt-2">
                –ó–∞–º–µ—Ç–æ–∫: {{ category.count }}
            </p>
        </a>
        {% endfor %}
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="mt-8 bg-blue-50 rounded-lg p-6">
        <h3 class="font-semibold text-blue-900 mb-3">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h3>
        <div class="space-y-2">
            {% set total_notes = categories|sum(attribute='count') %}
            <p class="text-blue-800">‚Ä¢ –í—Å–µ–≥–æ –∑–∞–º–µ—Ç–æ–∫: <strong>{{ total_notes }}</strong></p>
            <p class="text-blue-800">‚Ä¢ –ö–∞—Ç–µ–≥–æ—Ä–∏–π: <strong>{{ total_categories }}</strong></p>
            <p class="text-blue-800">‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ –∑–∞–º–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é: <strong>{{ "%.1f"|format(total_notes / total_categories if total_categories > 0 else 0) }}</strong></p>
        </div>
    </div>
    {% else %}
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–µ—Ç -->
    <div class="bg-white rounded-lg shadow-md p-12 text-center">
        <div class="text-6xl mb-4">üìÇ</div>
        <h2 class="text-2xl font-bold text-gray-700 mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</h2>
        <p class="text-gray-500 mb-6">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–º–µ—Ç–∫—É —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π</p>
        <a href="{{ url_for('main.create_note') }}" class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold">
            ‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
